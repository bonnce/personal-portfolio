---
import { ViewTransitions } from 'astro:transitions';
interface Props {
	title: string;
}

const anim = {
  old: {
    name: 'slideIn',
    duration: '0.5s',
    easing: 'linear',
    fillMode: 'forwards',
  },
  new: {
    name: 'slideOut',
    duration: '0.5s',
    easing: 'linear',
    fillMode: 'backwards',
  }
};

const slideDown = {
  forwards: anim,
  backwards: anim,
};

const { title } = Astro.props;
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="description" content="Astro description" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>{title}</title>
		<ViewTransitions/>
	</head>
	<body transition:animate={slideDown}>
		<slot/>
	</body>
</html>
<style is:global>
	:root {
		--accent: 136, 58, 234;
		--accent-light: 224, 204, 250;
		--accent-dark: 49, 10, 101;
		--accent-gradient: linear-gradient(
			45deg,
			rgb(var(--accent)),
			rgb(var(--accent-light)) 30%,
			white 60%
		);
	}
	html {
		font-family: system-ui, sans-serif;
		background: #13151a;
		background-size: 224px;
	}
	code {
		font-family:
			Menlo,
			Monaco,
			Lucida Console,
			Liberation Mono,
			DejaVu Sans Mono,
			Bitstream Vera Sans Mono,
			Courier New,
			monospace;
	}
	@keyframes slideIn {
		from{
			transform:translateY(0%)
		}
		to{
			transform:translateY(100vh);
		}
	}
	@keyframes slideOut {
		from{
			transform:translateY(-100vh)
		}
		to{
			transform:translateY(0%);
		}
	}
</style>

<script>
	document.addEventListener('astro:page-load',()=>{
		const newDiv = document.createElement('div')
		// @ts-ignore: Unreachable code error
		newDiv.style.viewTransitionName = 'divaso'
		newDiv.style.height = '40px'
		newDiv.style.width = '40px'
		newDiv.style.backgroundColor = '#F00'
		document.body.append(newDiv)
		console.log(newDiv)
		document.documentElement.animate({
			opacity:['1','0']
		},{
			duration: 500,
			easing: 'ease-in',
			pseudoElement: '::view-transition-group(divaso)'
		})
		document.documentElement.animate({
			opacity:['1','0']
		},{
			duration: 500,
			easing: 'ease-in',
			pseudoElement: '::view-transition-group(divaso)'
		})
		
	})
</script>